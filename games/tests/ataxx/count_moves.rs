#[cfg(test)]
mod tests {
    use games::{ataxx::AtaxxPosition, gamerules::GameRules};

    #[test]
    fn count_moves() {
        let tests = [
            "startpos",
            "x5o/7/7/7/7/7/o5x x 0 1",
            "x5o/7/2-1-2/7/2-1-2/7/o5x x 0 1",
            "x5o/7/3-3/2-1-2/3-3/7/o5x x 0 1",
            "x2-2o/3-3/2---2/7/2---2/3-3/o2-2x x 0 1",
            "x2-2o/3-3/7/--3--/7/3-3/o2-2x x 0 1",
            "x1-1-1o/2-1-2/2-1-2/7/2-1-2/2-1-2/o1-1-1x x 0 1",
            "x5o/7/2-1-2/3-3/2-1-2/7/o5x x 0 1",
            "x5o/7/3-3/2---2/3-3/7/o5x x 0 1",
            "x5o/2-1-2/1-3-1/7/1-3-1/2-1-2/o5x x 0 1",
            "x5o/1-3-1/2-1-2/7/2-1-2/1-3-1/o5x x 0 1",
            "x-1-1-o/-1-1-1-/1-1-1-1/-1-1-1-/1-1-1-1/-1-1-1-/o-1-1-x x 0 1",
            "x-1-1-o/1-1-1-1/1-1-1-1/1-1-1-1/1-1-1-1/1-1-1-1/o-1-1-x x 0 1",
            "x1-1-1o/2-1-2/-------/2-1-2/-------/2-1-2/o1-1-1x x 0 1",
            "x5o/1-----1/1-3-1/1-1-1-1/1-3-1/1-----1/o5x x 0 1",
            "x-1-1-o/1-1-1-1/-1-1-1-/-1-1-1-/-1-1-1-/1-1-1-1/o-1-1-x x 0 1",
            "x5o/1--1--1/1--1--1/7/1--1--1/1--1--1/o5x x 0 1",
            "x-3-o/1-1-1-1/1-1-1-1/3-3/1-1-1-1/1-1-1-1/o-3-x x 0 1",
            "x2-2o/3-3/3-3/-------/3-3/3-3/o2-2x x 0 1",
            "x2-2o/2-1-2/1-3-1/-2-2-/1-3-1/2-1-2/o2-2x x 0 1",
            "7/7/7/7/-------/-------/1oooxxx x 0 1",
            "7/7/7/7/-------/-------/1oooxxx o 0 1",
            "7/7/7/7/-------/-------/ooooxxx x 0 1",
            "7/7/7/7/-------/-------/ooooxxx o 0 1",
            "x5o/7/7/7/7/7/o5x x 100 1",
            "x5o/7/7/7/7/7/o5x o 100 1",
        ];

        for fen in tests {
            let pos = AtaxxPosition::from_fen(fen);
            assert_eq!(pos.legal_moves().len() as u64, pos.count_moves());
        }
    }
}
